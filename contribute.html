<!DOCTYPE html>
<html style="height: 100%">
  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>ITAC Timeline - Add Event</title>
  <link rel="shortcut icon" href="favicon.ico" type="image/vnd.microsoft.icon">
  <link rel="stylesheet" href="assets/main.css">
  

  </head>
  <body style="height: 100%">



	<div class="container is-fluid">

		<nav class="level">
		  <div class="level-item has-text-centered">
			<img id="header-img" src="assets/ITAC4-Header.jpg">
		  </div>
		</nav>
		<nav class="level">
		  <div class="level-item has-text-centered">
		    <h3 class="title is-2">ITAC Timeline</h3>
		  </div>
		</nav>
		<nav class="level">
		  <div class="level-item has-text-centered">
		  	<div class="content">
		      <p id="header-about" class="has-background-white-ter">We're building a timeline! Help contribute by filling out the fields below, blah b,ah blah more about the timeline Ut venenatis, nisl scelerisque sollicitudin fermentum, quam libero hendrerit ipsum, ut blandit est tellus sit amet turpis.</p>
		  	</div>
		  </div>
		</nav>



	</div>

<div class="container is-fluid">
	<div class="tile is-ancestor">
	  <div class="tile is-parent">
	    <article class="tile is-child box has-background-primary" style="min-height: 320px;">
	      <p class="title">Step 1 - What</p>
	      <p class="subtitle">What kind of event are you adding? Pick the best category that your event fits into.</p>
			<div class="select is-large is-clearfix">
				<select size="5" id="form-group">
				<option value="Breakthrough practice/Key Programs">Breakthrough practice/Key Programs</option>
				<option value="Key Organizations">Key Organizations</option>
				<option value="Books/Articles">Books/Articles</option>
				<option value="Events">Events</option>
				<option value="Research">Research</option>
				</select>
			</div>	  
	    </article>
	  </div>
	  <div class="tile is-parent">
	    <article class="tile is-child box has-background-warning">
	      <p class="title">Step 2 - When</p>
	      <p class="subtitle">What date did it happen, if you don't know the month or day just leave it "N/A"</p>

			<div class="field">
			  <div class="control">
			    <div class="select is-medium select-dates">
						<select id="form-year">
							<option value="2018">2018</option>
							<option value="2017">2017</option>
							<option value="2016">2016</option>
						    <option value="2015">2015</option>
						    <option value="2014">2014</option>
						    <option value="2013">2013</option>
						    <option value="2012">2012</option>
						    <option value="2011">2011</option>
						    <option value="2010">2010</option>
						    <option value="2009">2009</option>
						    <option value="2008">2008</option>
						    <option value="2007">2007</option>
						    <option value="2006">2006</option>
						    <option value="2005">2005</option>
						    <option value="2004">2004</option>
						    <option value="2003">2003</option>
						    <option value="2002">2002</option>
						    <option value="2001">2001</option>
						    <option value="2000">2000</option>
						    <option value="1999">1999</option>
						    <option value="1998">1998</option>
						    <option value="1997">1997</option>
						    <option value="1996">1996</option>
						    <option value="1995">1995</option>
						    <option value="1994">1994</option>
						    <option value="1993">1993</option>
						    <option value="1992">1992</option>
						    <option value="1991">1991</option>
						    <option value="1990">1990</option>
						    <option value="1989">1989</option>
						    <option value="1988">1988</option>
						    <option value="1987">1987</option>
						    <option value="1986">1986</option>
						    <option value="1985">1985</option>
						    <option value="1984">1984</option>
						    <option value="1983">1983</option>
						    <option value="1982">1982</option>
						    <option value="1981">1981</option>
						    <option value="1980">1980</option>
						    <option value="1979">1979</option>
						    <option value="1978">1978</option>
						    <option value="1977">1977</option>
						    <option value="1976">1976</option>
						    <option value="1975">1975</option>
						    <option value="1974">1974</option>
						    <option value="1973">1973</option>
						    <option value="1972">1972</option>
						    <option value="1971">1971</option>
						    <option value="1970">1970</option>
						    <option value="1969">1969</option>
						    <option value="1968">1968</option>
						    <option value="1967">1967</option>
						    <option value="1966">1966</option>
						    <option value="1965">1965</option>
						    <option value="1964">1964</option>
						    <option value="1963">1963</option>
						    <option value="1962">1962</option>
						    <option value="1961">1961</option>
						    <option value="1960">1960</option>
						    <option value="1959">1959</option>
						    <option value="1958">1958</option>
						    <option value="1957">1957</option>
						    <option value="1956">1956</option>
						    <option value="1955">1955</option>
						    <option value="1954">1954</option>
						    <option value="1953">1953</option>
						    <option value="1952">1952</option>
						    <option value="1951">1951</option>
						    <option value="1950">1950</option>
						    <option value="1949">1949</option>
						    <option value="1948">1948</option>
						    <option value="1947">1947</option>
						    <option value="1946">1946</option>
						    <option value="1945">1945</option>
						    <option value="1944">1944</option>
						    <option value="1943">1943</option>
						    <option value="1942">1942</option>
						    <option value="1941">1941</option>
						    <option value="1940">1940</option>
						    <option value="1939">1939</option>
						    <option value="1938">1938</option>
						    <option value="1937">1937</option>
						    <option value="1936">1936</option>
						    <option value="1935">1935</option>
						    <option value="1934">1934</option>
						    <option value="1933">1933</option>
						    <option value="1932">1932</option>
						    <option value="1931">1931</option>
						    <option value="1930">1930</option>
						    <option value="1929">1929</option>
						    <option value="1928">1928</option>
						    <option value="1927">1927</option>
						    <option value="1926">1926</option>
						    <option value="1925">1925</option>
						    <option value="1924">1924</option>
						    <option value="1923">1923</option>
						    <option value="1922">1922</option>
						    <option value="1921">1921</option>
						    <option value="1920">1920</option>
						    <option value="1919">1919</option>
						    <option value="1918">1918</option>
						    <option value="1917">1917</option>
						    <option value="1916">1916</option>
						    <option value="1915">1915</option>
						    <option value="1914">1914</option>
						    <option value="1913">1913</option>
						    <option value="1912">1912</option>
						    <option value="1911">1911</option>
						    <option value="1910">1910</option>
						    <option value="1909">1909</option>
						    <option value="1908">1908</option>
						    <option value="1907">1907</option>
						    <option value="1906">1906</option>
						    <option value="1905">1905</option>
						</select>

				        <select id="form-month">
					        <option value="">N/A</option>
					        <option value="1">01 - January</option>
					        <option value="2">02 - February</option>
					        <option value="3">03 - March</option>
					        <option value="4">04 - April</option>
					        <option value="5">05 - May</option>
					        <option value="6">06 - June</option>
					        <option value="7">07 - July</option>
					        <option value="8">08 - August</option>
					        <option value="9">09 - September</option>
					        <option value="10">10 - October</option>
					        <option value="11">11 - November</option>
					        <option value="12">12 - December</option>

				        </select>
					     <select id="form-day">
					          <option value="">N/A</option>
					          <option value="1">1</option>
					          <option value="2">2</option>
					          <option value="3">3</option>
					          <option value="4">4</option>
					          <option value="5">5</option>
					          <option value="6">6</option>
					          <option value="7">7</option>
					          <option value="8">8</option>
					          <option value="9">9</option>
					          <option value="10">10</option>
					          <option value="11">11</option>
					          <option value="12">12</option>
					          <option value="13">13</option>
					          <option value="14">14</option>
					          <option value="15">15</option>
					          <option value="16">16</option>
					          <option value="17">17</option>
					          <option value="18">18</option>
					          <option value="19">19</option>
					          <option value="20">20</option>
					          <option value="21">21</option>
					          <option value="22">22</option>
					          <option value="23">23</option>
					          <option value="24">24</option>
					          <option value="25">25</option>
					          <option value="26">26</option>
					          <option value="27">27</option>
					          <option value="28">28</option>
					          <option value="29">29</option>
					          <option value="30">30</option>
					          <option value="31">31</option>
					     </select>


					</div>
				</div>
			</div>


	    </article>
	  </div>
	</div>
</div>





<div class="container is-fluid">
	<div class="tile is-ancestor">
	  <div class="tile is-parent">
	    <article class="tile is-child box has-background-link" >
	      <p class="title">Step 3 - Headline</p>
	      <p class="subtitle">What is the title of this event? Limited to 75 characters, so keep it brief! </p>
			<div class="field">
			  <div class="control">
			    <input id="form-headline" class="input is-medium" maxlength="75" type="text" placeholder="Event Headline">
			  </div>
			</div>

	    </article>
	  </div>
	  <div class="tile is-parent">
	    <article class="tile is-child box has-background-success">
	      <p class="title">Step 4 - About</p>
	      <p class="subtitle">Write a short description about this event. If you have any links include them here.</p>
			<div class="field">
			  <div class="control">
			    <textarea class="textarea is-medium" id="form-desc" type="text" placeholder="About Event"></textarea>
			  </div>
			</div>
		

	    </article>
	  </div>
	</div>
</div>

<div class="container is-fluid">
	<div class="tile is-ancestor">
	  <div class="tile is-parent">
	    <article class="tile is-child box has-background-danger" >
	      <p class="title">Step 5 - Image</p>
	      <p class="subtitle">Do you have an image that could be displayed for this event? Drag it to the outlined area below or click to open a dialog box.</p>
			
    <div >
        <div class="dropzone">        	
        </div>
			<div class="field">
			  <div class="control">
			    <input class="input is-small" id="form-image-url"  maxlength="75" type="text" placeholder="URL to uploaded image will appear here">
			  </div>
			</div>

    </div>



	    </article>
	  </div>
	  

	</div>
</div>

	

<div class="container is-fluid">

	<nav class="level">
	  <div class="level-item has-text-centered">
		<a id="form-submit" class="button is-large is-fullwidth is-rounded is-success">Submit Event</a>
	  </div>
	</nav>
	




</div>
	

	  <form style="opacity: 0;" onsubmit="return false" id="hidden-form" name="hidden-form">
	  	<input id="hidden-group" name="Group"  placeholder="Group">  
	  	<input id="hidden-year" name="Year"  placeholder="Year">  
	  	<input id="hidden-month" name="Month"  placeholder="Month">  
	  	<input id="hidden-day" name="Day"  placeholder="Day">  
	  	<input id="hidden-time" name="Time"  placeholder="Time">  

	  	<input id="hidden-end-year" name="End Year"  placeholder="Day">  
	  	<input id="hidden-end-month" name="End Month"  placeholder="Day">  
	  	<input id="hidden-end-day" name="End Day"  placeholder="Day">  
	  	<input id="hidden-end-time" name="End Time"  placeholder="Day">  
	  	<input id="hidden-display-date" name="Display Date"  placeholder="Day">  

	  	<input id="hidden-headline" name="Headline"  placeholder="Headline">  
	  	<input id="hidden-desc" name="Text"  placeholder="Text">  
	  	<input id="hidden-media" name="Media"  placeholder="Media">  
	  	<input id="hidden-media-credit" name="Media Credit"  placeholder="Media Credit">  
	  	<input id="hidden-media-caption" name="Media Caption"  placeholder="Media Caption">  
	  	<input id="hidden-media-thumbnail" name="Media Thumbnail" placeholder="Media Thumbnail">  
	  	<input id="hidden-type" name="Type"  placeholder="Type">  
	  	<input id="hidden-background" name="Background"  placeholder="Background">  

	  	<input id="hidden-enabled" name="Enabled" value="false"  placeholder="Background">  
	  	




	  	<input name="email" type="email" placeholder="Email">  
	  	<button id="hidden-form-button" type="submit">Send</button>  
	  	
	 </form>  

    <script type="text/javascript" src="assets/imgur.min.js"></script>
    <script type="text/javascript">
        var feedback = function (res) {
            if (res.success === true) {
                // document.querySelector('.status').classList.add('bg-success');
                // document.querySelector('.status').innerHTML = 'Image url: ' + res.data.link;
                document.getElementById('form-image-url').value = res.data.link

            }
        };

        new Imgur({
            clientid: 'cc86a8de0e7c459',
            callback: feedback
        });

		if(!String.linkify) {
		    String.prototype.linkify = function() {

		        // http://, https://, ftp://
		        var urlPattern = /\b(?:https?|ftp):\/\/[a-z0-9-+&@#\/%?=~_|!:,.;]*[a-z0-9-+&@#\/%=~_|]/gim;

		        // www. sans http:// or https://
		        var pseudoUrlPattern = /(^|[^\/])(www\.[\S]+(\b|$))/gim;

		        // Email addresses
		        var emailAddressPattern = /[\w.]+@[a-zA-Z_-]+?(?:\.[a-zA-Z]{2,6})+/gim;

		        return this
		            .replace(urlPattern, '<a href="$&">$&</a>')
		            .replace(pseudoUrlPattern, '$1<a href="http://$2">$2</a>')
		            .replace(emailAddressPattern, '<a href="mailto:$&">$&</a>');
		    };
		}

        var monthLookup = {
		  "1": "January",
		  "2": "February",
		  "3": "March",
		  "4": "April",
		  "5": "May",
		  "6": "June",
		  "7": "July",
		  "8": "August",
		  "9": "September",
		  "10": "October",
		  "11": "November",
		  "12": "December"
		}

        document.getElementById('form-submit').onclick = function() {
        
        	var error = ""

        	var group = document.getElementById('form-group').value;
        	document.getElementById('hidden-group').value = group;

        	var year = document.getElementById('form-year').value;
        	document.getElementById('hidden-year').value = year;
        	var month = document.getElementById('form-month').value;
        	document.getElementById('hidden-month').value = month;
        	var day = document.getElementById('form-day').value;
        	document.getElementById('hidden-day').value = day;


        	if (month != '' && day != ''){
        		document.getElementById('hidden-display-date').value = monthLookup[month] + ' ' + day + ' ' + year;
        	}else if (month != ''){
        		document.getElementById('hidden-display-date').value = monthLookup[month] + ' ' + year;
        	}else{
        		document.getElementById('hidden-display-date').value = year;
        	}


        	var headline = document.getElementById('form-headline').value;
        	document.getElementById('hidden-headline').value = headline;

        	var desc = document.getElementById('form-desc').value;
        	document.getElementById('hidden-desc').value = desc.linkify();

        	var media = document.getElementById('form-image-url').value;
        	document.getElementById('hidden-media').value = media;


        	if (group.trim() === ''){
        		error = error + "Pelase complete Step 1\n"
        	}
        	if (headline.trim() === ''){
        		error = error + "Pelase complete Step 3\n"
        	}
        	if (desc.trim() === ''){
        		error = error + "Pelase complete Step 4\n"
        	}


        	if (error != ""){
        		alert(error)
        		return false;
        	}else{



        		document.getElementById("hidden-form-button").click();

        		alert("Thank you for submitting an event! Feel free to add more.")
        		window.location.reload();

        	}




    	};



	  const scriptURL = 'https://script.google.com/macros/s/AKfycbxWj75OILEW1QuhDU5qKAU-ZKp3_I6kISXLlVV5aKPLaGLXrDw/exec'  
	  const form = document.forms['hidden-form']  
	  form.addEventListener('submit', e => {  
	   e.preventDefault()  
	   fetch(scriptURL, { method: 'POST', body: new FormData(form)})  
	    .then(response => console.log('Success!', response))  
	    .catch(error => console.error('Error!', error.message))  
	   return false
	  })  

    </script>



  
  </body>
</html>